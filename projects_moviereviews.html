<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <meta content="description" name="description">
    <meta name="google" content="notranslate" />
    <meta content="Mashup templates have been developped by Orson.io team" name="author">
    <title>Movie Reviews Written by AI</title>
    <link href="../style.css" rel="stylesheet">
</head>

<body>
    <main class="content-wrapper">
        <header class="white-text-container section-container">
            <div class="text-center">
                <h1>movie reviews by AI</h1>
                <p>
                    <a href="https://richardbx1.github.io/">home</a> | 
                    <a href="https://richardbx1.github.io/projects.html">projects</a> | 
                    <a href="https://richardbx1.github.io/events.html">events</a>
                </p>
            </div>
        </header>

        <div class="container">
            <div class="card">
                <div class="card-block">
                    <div class="row">
                        <div class="col-md-4">
                            <h3>Introduction to OpenAI</h3>
                            <p>GPT-2 is a model trained by OpenAI on 40gb of internet text. Its job is basically to predict the next word in a given sequence of words. Because it is trained on such a large corpus of words, it has become excellent at writing text.</p>
                            <div class="text-center">
                                <a href="https://openai.com/blog/better-language-models/" target="_blank" class="button"><span>OpenAI Info</span></a>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <h3>What I Did</h3>
                            <p>I finetuned their existing model with movie review text from Rotten Tomatoes. What this fine-tuning does is that it learns the heuristics and characteristics of movie reviews such as, typical length, typical words and phrases that are included as well as picking up on actors and movie titles.</p>
                            <div class="text-center">
                                <a href="https://richardbx1.github.io/projects_moviereviews.html" class="button"><span>Github</span></a>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <h3>What I Learnt</h3>
                            <p>Not only did this project give a glimpse at working with GPT-2, it taught me alot of other great things such as hosting API's via Docker and Google Cloud as well as HTML & Web Design. There were alot of components involved in this project end-to-end and I think it has given me alot of valuable skills for the future.</p>
                        </div>
                    </div>
                    
                    <div class = "row">
                        <form id="gen-form">
                            <div class="col-md-3">
                                <div class="field">
                                  <label class="label">Text Prompt</label>
                                  <div class="control">
                                    <textarea id="prefix" class="textarea" type="text" placeholder="Donald Trump" rows="2"></textarea>
                                  </div>
                                  <p class="help">Starts the generated text with the specified text. <em>(Optional: max 500 characters)</em></p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="field">
                                  <label class="label">Generated Text Length</label>
                                  <div class="control">
                                    <input id="length" class="input" type="text" placeholder="Text input" value="100">
                                  </div>
                                  <p class="help">Length of the text in tokens to generate. <em>(max: 1023)</em></p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="field">
                                      <label class="label">Temperature</label>
                                      <div class="control">
                                        <input id="temperature" class="input" type="text" placeholder="0.7" value="0.7">
                                      </div>
                                      <p class="help">Controls the generated text "creativity." <em>(the higher the temperature, the more
                                          creative)</em></p>
                                    </div>
                            </div>
                            <div class="col-md-3">
                                <div class="field">
                                  <label class="label">Top <em>k</em></label>
                                  <div class="control">
                                    <input id="top_k" class="input" type="text" placeholder="40" value="40">
                                  </div>
                                  <p class="help">Constrains the generated text tokens to the top <em>k</em> possibilities. <em>(set to 0 to
                                      disable)</em></p>
                                </div>
                            </div>
                        </form>
                    </div>
                    
                    <div class='row'>
                        <div class="text-center">
                            <div class="buttons">
                                <span class="control">
                                    <button type="submit" name="submit" id="generate-text" class="button is-link">
                                        <span class="icon">
                                            <i class="fas fa-md fa-pen"></i>
                                        </span><span>Generate Text!</span></button>
                                </span>
                                <div id="model-output" class="column">
                                        <p id="tutorial" class="subtitle">
                                            <em>Generated text will appear here! Use the form to configure GPT-2 and press <strong>Generate Text</strong> to get your own text!
                                            </em>
                                    </p>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    </body>
    
    
          <div id="extra-buttons" class="buttons">
            <span class="control">
              <button id="save-image" class="button is-success">
                <span class="icon">
                  <i class="fas fa-md fa-save"></i>
                </span><span>Save Image</span></button>
            </span>
            <span class="control">
              <button id="clear-text" class="button is-danger">
                <span class="icon">
                  <i class="fas fa-md fa-trash-alt"></i>
                </span><span>Clear Texts</span</button> </span> </div> </div> <div id="model-output" class="column">
                  <p id="tutorial" class="subtitle"><em>Generated text will appear here!
                      Use the form to configure GPT-2 and press <strong>Generate Text</strong>
                      to get your own text!
                    </em></p>
          </div>
        </div>
      </div>


  </section>

  <footer class="footer">
    <div class="content has-text-centered">
      <p>
        Made using <a href="https://github.com/minimaxir/gpt-2-simple" target="_blank"><strong>gpt-2-simple</strong></a>
        and <a href="https://github.com/minimaxir/gpt-2-cloud-run" target="_blank"><strong>gpt-2-cloud-run</strong></a>
        by <a href="https://minimaxir.com" target="_blank">Max Woolf</a>. Original GPT-2 model provided by <a
          href="https://openai.com" target="_blank">OpenAI</a>. This website content
        is licensed <a href="http://opensource.org/licenses/mit-license.php" target="_blank">MIT</a>.
      </p>
    </div>
  </footer>


</body>

<script src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous">
  </script>

<script src="http://html2canvas.hertzen.com/dist/html2canvas.min.js">
</script>

<script type="text/javascript">
  $(function () {
    $('#gen-form').submit(function (e) {
      e.preventDefault();
      $.ajax({
        type: "POST",
        url: "https://gpt2-default-dstdu4u23a-uc.a.run.app",
        dataType: "json",
        data: JSON.stringify(getInputValues()),
        beforeSend: function (data) {
          $('#generate-text').addClass("is-loading");
          $('#generate-text').prop("disabled", true);
        },
        success: function (data) {
          $('#generate-text').removeClass("is-loading");
          $('#generate-text').prop("disabled", false);
          $('#tutorial').remove();
          var gentext = data.text;
          if ($("#prefix").length & $("#prefix").val() != '') {
            var pattern = new RegExp('^' + $("#prefix").val(), 'g');
            var gentext = gentext.replace(pattern, '<strong>' + $("#prefix").val() + '</strong>');
          }

          var gentext = gentext.replace(/\n\n/g, "<div><br></div>").replace(/\n/g, "<div></div>");
          var html = '<div class=\"gen-box\">' + gentext + '</div><div class="gen-border"></div>';
          $(html).appendTo('#model-output').hide().fadeIn("slow");
        },
        error: function (jqXHR, textStatus, errorThrown) {
          $('#generate-text').removeClass("is-loading");
          $('#generate-text').prop("disabled", false);
          $('#tutorial').remove();
          var html = '<div class="gen-box warning">There was an error generating the text! Please try again!</div><div class="gen-border"></div>';
          $(html).appendTo('#model-output').hide().fadeIn("slow");
        }
      });
    });
    $('#clear-text').click(function (e) {
      $('#model-output').text('')
    });

    // https://stackoverflow.com/a/51478809
    $("#save-image").click(function () {

      html2canvas(document.querySelector('#model-output')).then(function (canvas) {

        saveAs(canvas.toDataURL(), 'gen_texts.png');
      });
    });

  });

  function getInputValues() {
    var inputs = {};
    $("textarea, input").each(function () {
      inputs[$(this).attr('id')] = $(this).val();
    });
    return inputs;
  }

  // https://stackoverflow.com/a/51478809
  function saveAs(uri, filename) {

    var link = document.createElement('a');

    if (typeof link.download === 'string') {

      link.href = uri;
      link.download = filename;

      //Firefox requires the link to be in the body
      document.body.appendChild(link);

      //simulate click
      link.click();

      //remove the link when done
      document.body.removeChild(link);

    } else {

      window.open(uri);

    }
  }


</script>

</html>
    
</html>